# Scheda Tecnica: ESP32-S3-WROOM-1 (N16R8) DevKitC-1

## Specifiche Tecniche Principali

| Parametro | Dettaglio |
| :--- | :--- |
| **Microprocessore** | Xtensa® Dual-Core 32-bit LX7 (fino a 240 MHz) |
| **Memoria Flash** | 16 MB (Quad SPI) |
| **PSRAM** | 8 MB (Octal SPI) |
| **SRAM Interna** | 512 KB |
| **Connettività Wi-Fi** | IEEE 802.11 b/g/n (2.4 GHz) fino a 150 Mbps |
| **Bluetooth** | Bluetooth 5 (LE) e Bluetooth Mesh |
| **Interfaccia USB** | Dual USB-C (1x UART per Debug, 1x Nativa USB OTG) |
| **Dimensioni** | 62.74 mm x 25.40 mm |

---

## Layout Hardware e Componenti Speciali

### Periferiche On-Board:
- **LED RGB:** Collegato internamente al pin **GPIO 48**. È un LED indirizzabile (tipo WS2812).
- **Pulsante BOOT:** Collegato a **GPIO 0**. Utilizzato per forzare la modalità download del firmware.
- **Pulsante RESET (EN):** Riavvia il microcontrollore.
- **Dual USB-C:**
    - **Porta UART:** Collegata al chip bridge USB-to-UART (solitamente CP2102 o CH343). Da usare per la programmazione standard e il monitoraggio seriale.
    - **Porta USB:** Collegata direttamente ai pin GPIO 19/20 dell'ESP32-S3. Supporta USB OTG, HID e JTAG integrato.

---

## Tabella Completa dei Pin (Pinout)

I pin sono disposti su due file da 22 pin ciascuna (passo 2.54mm).

### Lato Sinistro (Vista frontale, USB in basso)

| Pin | Nome | Tipo | Funzioni Alternative / Note |
| :--- | :--- | :--- | :--- |
| 1 | **3.3V** | P | Uscita regolatore 3.3V (o ingresso se alimentato esternamente) |
| 2 | **3.3V** | P | Collegato al pin 1 |
| 3 | **RST** | I | Pulsante Reset (EN) - Active Low |
| 4 | **4** | I/O | ADC1_CH3, TOUCH4, MTMS |
| 5 | **5** | I/O | ADC1_CH4, TOUCH5, MTDI |
| 6 | **6** | I/O | ADC1_CH5, TOUCH6, MTCK |
| 7 | **7** | I/O | ADC1_CH6, TOUCH7, MTDO |
| 8 | **15** | I/O | ADC2_CH4, TOUCH15 |
| 9 | **16** | I/O | ADC2_CH5, TOUCH16 |
| 10 | **17** | I/O | ADC2_CH6, TOUCH17 |
| 11 | **18** | I/O | ADC2_CH7, RGB LED (Data) - *Nota: Spesso usato internamente* |
| 12 | **8** | I/O | ADC1_CH7, TOUCH8 |
| 13 | **3** | I/O | ADC1_CH2, TOUCH3 |
| 14 | **46** | I | Solo Input (Pull-down fisso) |
| 15 | **9** | I/O | ADC1_CH8, TOUCH9 |
| 16 | **10** | I/O | ADC1_CH9, TOUCH10 |
| 17 | **11** | I/O | ADC2_CH0, TOUCH11 |
| 18 | **12** | I/O | ADC2_CH1, TOUCH12 |
| 19 | **13** | I/O | ADC2_CH2, TOUCH13 |
| 20 | **14** | I/O | ADC2_CH3, TOUCH14 |
| 21 | **5V** | P | Ingresso alimentazione 5V (da USB o esterno) |
| 22 | **GND** | P | Massa |

### Lato Destro (Vista frontale, USB in basso)

| Pin | Nome | Tipo | Funzioni Alternative / Note |
| :--- | :--- | :--- | :--- |
| 1 | **GND** | P | Massa |
| 2 | **TX** | I/O | GPIO 43, U0TXD (Default UART) |
| 3 | **RX** | I/O | GPIO 44, U0RXD (Default UART) |
| 4 | **1** | I/O | ADC1_CH0, TOUCH1 |
| 5 | **2** | I/O | ADC1_CH1, TOUCH2 |
| 6 | **42** | I/O | MTMS, GPIO 42 |
| 7 | **41** | I/O | MTDI, GPIO 41 |
| 8 | **40** | I/O | MTCK, GPIO 40 |
| 9 | **39** | I/O | MTDO, GPIO 39 |
| 10 | **38** | I/O | GPIO 38 |
| 11 | **37** | I/O | GPIO 37 |
| 12 | **36** | I/O | GPIO 36 |
| 13 | **35** | I/O | GPIO 35 |
| 14 | **0** | I/O | Pulsante BOOT, ADC1_CH0 |
| 15 | **45** | I/O | GPIO 45 |
| 16 | **48** | I/O | **LED RGB Integrato** (WS2812) |
| 17 | **47** | I/O | GPIO 47 |
| 18 | **21** | I/O | GPIO 21 |
| 19 | **20** | I/O | USB D+ (Nativa) |
| 20 | **19** | I/O | USB D- (Nativa) |
| 21 | **GND** | P | Massa |
| 22 | **GND** | P | Massa |

**Legenda Tipo:** P = Alimentazione, I = Input, O = Output, I/O = Bidirezionale.

---

### Tabella delle Periferiche e Segnali

| Pin (GPIO) | Funzione Primaria | ADC / Touch | Bus Alternativi (SPI, UART, I2C) | Note per il Progettista |
| :--- | :--- | :--- | :--- | :--- |
| **0** | Boot / Strapping | ADC1_CH0 | - | Deve essere HIGH all'avvio per il boot normale. |
| **1** | **I2C SDA (Consigliato)** | ADC1_CH0 | TOUCH1 | **Ideale per SDA** (Bassa capacità residua). |
| **2** | **I2C SCL (Consigliato)** | ADC1_CH1 | TOUCH2 | **Ideale per SCL** (Bassa capacità residua). |
| **3** | Digital I/O | ADC1_CH2 | TOUCH3 | - |
| **4** | Digital I/O | ADC1_CH3 | TOUCH4 | MTMS (JTAG) |
| **5** | Digital I/O | ADC1_CH4 | TOUCH5 | MTDI (JTAG) |
| **6** | Digital I/O | ADC1_CH5 | TOUCH6 | MTCK (JTAG) |
| **7** | Digital I/O | ADC1_CH6 | TOUCH7 | MTDO (JTAG) |
| **8** | **I2C SDA (Default)** | ADC1_CH7 | TOUCH8 | Spesso usato come SDA predefinito in molte librerie. |
| **9** | **I2C SCL (Default)** | ADC1_CH8 | TOUCH9 | Spesso usato come SCL predefinito in molte librerie. |
| **10** | Digital I/O | ADC1_CH9 | TOUCH10 | SPI CS0 (FSPI) |
| **11** | Digital I/O | ADC2_CH0 | TOUCH11 | SPI MOSI (FSPI) |
| **12** | Digital I/O | ADC2_CH1 | TOUCH12 | SPI CLK (FSPI) |
| **13** | Digital I/O | ADC2_CH2 | TOUCH13 | SPI MISO (FSPI) |
| **14** | Digital I/O | ADC2_CH3 | TOUCH14 | SPI WP (FSPI) |
| **15** | Digital I/O | ADC2_CH4 | TOUCH15 | - |
| **16** | Digital I/O | ADC2_CH5 | TOUCH16 | - |
| **17** | Digital I/O | ADC2_CH6 | TOUCH17 | - |
| **18** | Digital I/O | ADC2_CH7 | TOUCH18 | - |
| **19** | USB D- | - | USB_OTG_D- | Connesso alla porta USB nativa. |
| **20** | USB D+ | - | USB_OTG_D+ | Connesso alla porta USB nativa. |
| **21** | Digital I/O | - | - | - |
| **38** | Digital I/O | - | FSPI HOLD | - |
| **39** | Digital I/O | - | MTCK | - |
| **40** | Digital I/O | - | MTDO | - |
| **41** | Digital I/O | - | MTDI | - |
| **42** | Digital I/O | - | MTMS | - |
| **43** | UART0 TX | - | U0TXD | Debug Serial (collegato al bridge USB-UART). |
| **44** | UART0 RX | - | U0RXD | Debug Serial (collegato al bridge USB-UART). |
| **45** | Strapping Pin | - | VDD_SPI Voltage | Non forzare HIGH all'avvio (rischio danni Flash). |
| **46** | Input Only | - | - | **Attenzione:** Funziona solo come ingresso. |
| **47** | Digital I/O | - | - | - |
| **48** | **RGB LED** | - | WS2812 Control | Collegato al LED RGB on-board. |

---

## Limitazioni Hardware Critiche (Importante)

1. **GPIO Riservati (33-37):** Poiché la tua versione è la **N16R8** (RAM Octal), i pin dal GPIO 33 al GPIO 37 sono utilizzati internamente per il bus SPI ad alta velocità della PSRAM. **Non tentare di utilizzarli nel tuo schema elettrico**, poiché causerebbero il crash immediato del sistema (Kernel Panic).
2. **Voltaggio I/O:** Tutti i pin operano a **3.3V**. L'applicazione di 5V su qualsiasi pin GPIO danneggerà permanentemente il SoC.
3. **Corrente massima:** Il regolatore di bordo può fornire circa 800mA. Se il tuo progetto include molti sensori I2C o strisce LED RGB esterne, alimenta questi ultimi separatamente condividendo solo la massa (GND).

---
*Documentazione ottimizzata per lo sviluppo di sistemi embedded di livello industriale.*
---
## 5. Mappatura Funzioni Speciali

In fase di progettazione firmware, tenere conto della flessibilità del sistema Matrix I/O dell'ESP32-S3, che permette di mappare quasi tutte le periferiche digitali su qualsiasi GPIO. Tuttavia, per performance ottimali, si consigliano i seguenti pin:

### Comunicazione Seriale
- **UART0 (Debug):** TX=GPIO 43, RX=GPIO 44
- **I2C0 (Default):** SDA=GPIO 8, SCL=GPIO 9 (Configurabile)
- **SPI (Default):** MOSI=GPIO 11, MISO=GPIO 13, SCK=GPIO 12, CS=GPIO 10

### Analogico e Touch
- **ADC1:** Canali 0-9 (GPIO 1-10) - *Nota: ADC1 è preferibile quando il Wi-Fi è attivo.*
- **ADC2:** Canali 0-9 (GPIO 11-20)
- **Touch Sensors:** 14 sensori capacitivi disponibili sui GPIO indicati in tabella.

### LED RGB di Stato
Il LED RGB WS2812 integrato è collegato al **GPIO 48**. Per pilotarlo, è necessario utilizzare una libreria come `Adafruit_NeoPixel` o `FastLED`.
